author: Wim Moermans
description: History filter generates list of visited tiddlers (breadcrumbs)
list: readme
plugin-type: plugin
tags: 
title: $:/plugins/wimmoermans/history
type: application/json
version: 0.8.2

{
    "tiddlers": {
        "$:/plugins/wimmoermans/history/fhistory.js": {
            "created": "20160511174147745",
            "creator": "wjam",
            "text": "/*\\\ntitle: $:/plugins/wimmoermans/fhistory.js\ntype: application/javascript\nmodule-type: filteroperator\n\na filter to generate ALL tiddler titles from historylist, \nrepairs escaped characters \" \\\n\nassumptions format of historylist \n  \"title\":\\s\"(.*)\"  where .* is the title of the visited tiddler\n\n@preserve\n\\*/\n\n (function() {\n        \"use strict\";\n        exports.fullhistory = function(e, t, i) {\n           var    o = [],\n                    match=\"\",\n                    regexp= \"\",\n                    ttt=\"\",\n                    text=\"\";\n            regexp = new RegExp(\"\\\"title\\\": \\\"(.+)\\\"\", \"ig\");\n            text = $tw.wiki.getTiddlerText(\"$:/HistoryList\");\n            while (match = regexp.exec(text)) {\n                ttt=match[1].replace(/\\\\\\\"/g,\"\\\"\");\n                ttt=ttt.replace(/\\\\\\\\/g,\"\\\\\");\n                o.push(ttt); /* oldest first */\n            }; /*while*/\n            return o;\n        }; /* export */\n\n }   )();",
            "type": "application/javascript",
            "title": "$:/plugins/wimmoermans/history/fhistory.js",
            "tags": "historyplugin",
            "module-type": "filteroperator",
            "modifier": "wjam",
            "modified": "20160513184814825"
        },
        "$:/plugins/wimmoermans/history/history.js": {
            "created": "20160505064231013",
            "creator": "Wim Moermans",
            "text": "/*\\\ntitle: $:/plugins/wimmoermans/history.js\ntype: application/javascript\nmodule-type: filteroperator\n\na filter to generate tiddler titles from historylist, reverse order, no duplicates (only most recent), no drafts.\n\nassumptions\n  \"title\":\\s\"(.*)\"  where .* is the title\n  \"Draft of '\" is the prefix for tiddler in edit mode\n\n@preserve\n\\*/\n\n (function() {\n        \"use strict\";\n        exports.history = function(e, t, i) {\n           var results = new Array(),\n                    o = [],\n                    match=\"\",\n                    regexp= \"\",\n                    text=\"\",\nttt=\"\",\n                    i=0,\n                    j=0,\n                    entries=0,\n                    found=0;\n            regexp = new RegExp(\"\\\"title\\\": \\\"(.+)\\\"\", \"ig\");\n            text = $tw.wiki.getTiddlerText(\"$:/HistoryList\");\n            while (match = regexp.exec(text)) {\n                ttt=match[1].replace(/\\\\\\\"/g,\"\\\"\");\n                ttt=ttt.replace(/\\\\\\\\/g,\"\\\\\");\n                if (ttt.substr(0, 10) !== \"Draft of '\") {\n                    results.push(ttt); /* oldest first */\n                    entries = entries + 1;\n                }\n            }\n            i = entries-1;\n            while (i >= 0) {\n                j = i + 1;\n                found = 0;\n                while ((j <= entries) && (found === 0)) {\n                    if (results[i] === results[j]) {\n                        found = 1;\n                    }\n                    j = j + 1;\n                }\n                if (found === 0) {\n\n                    if( results[i] !== \"\"){\n                         o.push(results[i]);\n                    }\n                }\n                i = i - 1;\n            };\n            return o;\n        }\n\n }   )();",
            "type": "application/javascript",
            "title": "$:/plugins/wimmoermans/history/history.js",
            "tags": "historyplugin",
            "module-type": "filteroperator",
            "modifier": "wjam",
            "modified": "20160513175106215"
        },
        "$:/plugins/wimmoermans/history/HistoryTab": {
            "created": "20160504135142490",
            "creator": "Wim Moermans",
            "text": "<small>breadcrumbs:</small>\n\n{{{ [history[]] }}}\n\n\n",
            "title": "$:/plugins/wimmoermans/history/HistoryTab",
            "tags": "$:/tags/SideBar historyplugin",
            "modifier": "wjam",
            "modified": "20160507201121730",
            "caption": "History"
        },
        "$:/plugins/wimmoermans/history/HistoryTab2": {
            "text": "<$linkcatcher to=\"$:/temp/advancedsearch\">\n\n<<lingo Shadows/Hint>>\n\n<div class=\"tc-search\">\n<$edit-text tiddler=\"$:/temp/advancedsearch\" type=\"search\" tag=\"input\"/>\n<$reveal state=\"$:/temp/advancedsearch\" type=\"nomatch\" text=\"\">\n<$button class=\"tc-btn-invisible\">\n<$action-setfield $tiddler=\"$:/temp/advancedsearch\" $field=\"text\" $value=\"\"/>\n{{$:/core/images/close-button}}\n</$button>\n</$reveal>\n</div>\n\n</$linkcatcher>\n{{{ [history[]search{$:/temp/advancedsearch}limit[26]] }}}\n",
            "title": "$:/plugins/wimmoermans/history/HistoryTab2",
            "tags": "$:/tags/AdvancedSearch historyplugin",
            "modifier": "wjam",
            "modified": "20160507171948465",
            "creator": "Wim Moermans",
            "created": "20160505094007336",
            "caption": "History2"
        },
        "$:/plugins/wimmoermans/history/icon": {
            "created": "20160508110003253",
            "title": "$:/plugins/wimmoermans/history/icon",
            "type": "image/svg+xml",
            "text": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n   xmlns:cc=\"http://creativecommons.org/ns#\"\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   width=\"22\"\n   height=\"21\"\n   id=\"svg4046\"\n   version=\"1.1\"\n   inkscape:version=\"0.47 r22583\"\n   sodipodi:docname=\"cat backtrack red sign 22x21.svg\">\n  <defs\n     id=\"defs4048\">\n    <linearGradient\n       inkscape:collect=\"always\"\n       id=\"linearGradient3600\">\n      <stop\n         style=\"stop-color:#ff0024;stop-opacity:1;\"\n         offset=\"0\"\n         id=\"stop3602\" />\n      <stop\n         style=\"stop-color:#ff0024;stop-opacity:0;\"\n         offset=\"1\"\n         id=\"stop3604\" />\n    </linearGradient>\n    <inkscape:perspective\n       sodipodi:type=\"inkscape:persp3d\"\n       inkscape:vp_x=\"0 : 526.18109 : 1\"\n       inkscape:vp_y=\"0 : 1000 : 0\"\n       inkscape:vp_z=\"744.09448 : 526.18109 : 1\"\n       inkscape:persp3d-origin=\"372.04724 : 350.78739 : 1\"\n       id=\"perspective4054\" />\n    <inkscape:perspective\n       id=\"perspective4064\"\n       inkscape:persp3d-origin=\"0.5 : 0.33333333 : 1\"\n       inkscape:vp_z=\"1 : 0.5 : 1\"\n       inkscape:vp_y=\"0 : 1000 : 0\"\n       inkscape:vp_x=\"0 : 0.5 : 1\"\n       sodipodi:type=\"inkscape:persp3d\" />\n    <linearGradient\n       inkscape:collect=\"always\"\n       xlink:href=\"#linearGradient3600\"\n       id=\"linearGradient3606\"\n       x1=\"-17.230652\"\n       y1=\"4.6165885\"\n       x2=\"-3.4143419\"\n       y2=\"4.6165885\"\n       gradientUnits=\"userSpaceOnUse\" />\n  </defs>\n  <sodipodi:namedview\n     id=\"base\"\n     pagecolor=\"#ffffff\"\n     bordercolor=\"#666666\"\n     borderopacity=\"1.0\"\n     inkscape:pageopacity=\"0.0\"\n     inkscape:pageshadow=\"2\"\n     inkscape:zoom=\"31.678384\"\n     inkscape:cx=\"9.633971\"\n     inkscape:cy=\"9.3724875\"\n     inkscape:document-units=\"px\"\n     inkscape:current-layer=\"layer1\"\n     showgrid=\"false\"\n     inkscape:window-width=\"1690\"\n     inkscape:window-height=\"1181\"\n     inkscape:window-x=\"-5\"\n     inkscape:window-y=\"-5\"\n     inkscape:window-maximized=\"1\" />\n  <metadata\n     id=\"metadata4051\">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about=\"\">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label=\"Layer 1\"\n     inkscape:groupmode=\"layer\"\n     id=\"layer1\"\n     transform=\"translate(-12.564828,-228.71506)\">\n    <path\n       sodipodi:type=\"arc\"\n       style=\"fill:#fcfcfc;fill-opacity:1;fill-rule:nonzero\"\n       id=\"path6042\"\n       sodipodi:cx=\"-1.4836615\"\n       sodipodi:cy=\"-1.6968651\"\n       sodipodi:rx=\"6.976366\"\n       sodipodi:ry=\"6.8500967\"\n       d=\"m 5.4927045,-1.6968651 a 6.976366,6.8500967 0 1 1 -13.9527321,0 6.976366,6.8500967 0 1 1 13.9527321,0 z\"\n       transform=\"matrix(1.2556561,0,0,1.2788018,25.334287,241.26263)\" />\n    <path\n       id=\"path6044\"\n       d=\"m 30.4446,244.31397 c 0.310834,-0.28767 0.606444,-0.65004 0.656841,-0.80533 0.226308,-0.69733 -1.75153,-1.35182 -2.563323,-0.84824 -0.640438,0.39727 -1.154161,1.973 -0.807158,2.47583 0.257232,0.37275 0.420332,0.39322 1.137559,0.14288 0.460496,-0.16076 0.876334,-0.32601 0.924074,-0.36721 0.04729,-0.042 0.341159,-0.31027 0.65198,-0.59797 l 2.7e-5,4e-5 z m 0.597108,-2.74293 c 0.09612,-0.164 0.0099,-0.46244 -0.199577,-0.69068 -0.46117,-0.50252 -1.166755,-0.22586 -1.371622,0.53779 -0.138492,0.51626 -0.124003,0.53781 0.418457,0.62237 0.608375,0.0949 0.889192,-0.0195 1.152742,-0.46948 z m -3.686825,2.07878 c 0.168572,-0.62841 -0.06485,-0.93373 -0.745912,-0.97577 -0.770729,-0.0477 -1.241044,0.64384 -0.836604,1.22992 0.512291,0.74232 1.35136,0.60756 1.582532,-0.25415 l -1.6e-5,0 z m 1.462533,-2.12446 0.185272,-0.64054 -0.625699,-0.0677 c -0.706134,-0.0764 -0.924717,0.0207 -1.305369,0.57977 -0.335314,0.49243 -0.04392,0.93382 0.644496,0.97629 0.707662,0.0437 0.882331,-0.0906 1.101289,-0.84784 l 1.1e-5,-4e-5 z m -7.797022,1.15185 c 0.76937,-0.85185 0.741916,-1.28981 -0.106461,-1.69843 -0.998166,-0.48078 -1.914981,-0.37475 -2.454339,0.28389 -0.516439,0.63069 -0.583894,1.63687 -0.151704,2.26314 0.51397,0.74476 1.572512,0.41361 2.712495,-0.8486 z m -3.48099,-0.42697 c 0.0896,-0.69621 -0.04686,-0.87565 -0.696238,-0.91572 -1.139297,-0.0703 -1.566432,0.84984 -0.702808,1.51406 0.586816,0.4513 1.303444,0.14483 1.399073,-0.59834 l -2.7e-5,0 z m 3.354628,-2.52461 c 0.149115,-0.45951 -0.275478,-0.99883 -0.833864,-1.05921 -0.603977,-0.0653 -0.7421,0.0289 -0.89905,0.61367 -0.166828,0.62185 0.06374,0.9337 0.720441,0.97418 0.628634,0.0389 0.868921,-0.0867 1.012367,-0.52882 l 1.06e-4,1.8e-4 z m -2.408088,0.34458 c 0.112063,-0.75445 -0.0033,-0.89128 -0.721233,-0.85538 -0.828289,0.0413 -1.07332,0.23945 -1.137099,0.9192 -0.05268,0.56122 -0.02343,0.59189 0.653277,0.68515 0.878304,0.12109 1.095906,-0.0141 1.204881,-0.74921 l 1.74e-4,2.4e-4 z m 5.888163,-5.33851 c 0.142599,-0.43933 -0.245444,-0.96317 -1.034761,-1.39674 -0.659415,-0.36226 -1.526134,-0.27635 -1.956444,0.1939 -0.468183,0.51161 -0.852424,1.97658 -0.610417,2.32725 0.48829,0.70756 3.291025,-0.16736 3.601586,-1.12433 l 3.6e-5,-8e-5 z m 0.05327,-2.11052 c 0.567019,-0.52796 -0.337185,-1.89786 -1.117088,-1.69249 -0.480085,0.12648 -0.794832,1.02942 -0.505121,1.44923 0.309844,0.44897 1.249847,0.58994 1.622222,0.24325 l -1.3e-5,1e-5 z m -3.840095,1.12289 c 0.05032,-0.53627 0.0115,-0.59251 -0.526932,-0.76354 -0.319703,-0.10149 -0.703975,-0.10859 -0.853942,-0.0154 -0.412123,0.25566 -0.580704,0.98457 -0.316321,1.36768 0.511143,0.74066 1.608153,0.36021 1.697198,-0.58862 l -3e-6,-7e-5 z m 1.399399,-1.72835 c 0.13752,-0.4755 0.08353,-0.73271 -0.201357,-0.9592 -0.777497,-0.6182 -2.043348,0.0734 -1.830727,1.00011 0.08032,0.34992 1.408324,0.87902 1.720388,0.68544 0.06804,-0.0423 0.208269,-0.3691 0.311631,-0.72643 l 6.5e-5,8e-5 z\"\n       style=\"fill:#000000\"\n       sodipodi:nodetypes=\"cssssscccsssccsscccccsscccsssccsscccssscccssscccssscccsscccssscccssscc\" />\n  </g>\n</svg>\n",
            "modified": "20160508110047926"
        },
        "$:/plugins/wimmoermans/history/readme": {
            "created": "20160505113313287",
            "creator": "wjam",
            "text": "!!history filter\nTom Tumb (Dutch: Klein Duimpje).used breadcrumbs because he didn't want to get lost in the woods. \n\nWhen reading or editing a large ~TiddlyWiki you sometimes get lost and revisit tiddlers over and over.  This plugin ''automatically creates a list of all visited tiddlers'', and allows you to answer questions like \"Where did I read that?\", \"Did I update tiddler XXYY already?\", \"Which system tiddlers did I view/edit?\" \"Which tiddlers did I rename/delete?\". \n\n!!functionality \n\n*The ''plugin/filter'' generates the tiddlers which you visited since loading the ~TiddlyWiki. \n*Like  ~OpenTab all* tiddlers from the story river are shown in the history. When you ''close a tiddler'' it is removed from the ~OpenTab but is ''still present in the the history''. \n*Tiddler titles which were opened using tiddlers like $:/DefaultTiddlers are not present in the history.\n*Like  ~RecentTab, the history list includes the tiddlers you created or modified during this session. When you ''delete or rename'' a tiddler during your session the old tiddler title will be in ''//italics//''. \n\ncompare ''history[]  and ''fullhistory[]\n\n| |''history[]''|fullhistory[]|\n| most recent visited tiddlers|''most recent visited appear first''|most recent appear last|\n| Draft titles|''drafts not included ''|all drafts ^^dangerous[1]^^|\n| visited multiple times|''no duplicates, only most recent title''|includes all duplicates|\n| usage|normal use|advanced use only|\n\n!!examples\n\nTo display all visited tiddlers so far use\n\n ``{{{[history[]]}}}`` \n\nYou can sort the list alphabetically, ''search'' the tiddlers and ''limit'' the number of results to 25. e.g.\n\n``{{{[history[]search{$:/temp/search}limit[25]]}}}``\n\nif you want to exclude system tiddlers from the list:\n\n``{{{[history[]!is[system]]}}}``\n\nIf you want modified but possibly not yet saved tiddlers (incl renamed, deleted but excluding Draft. \n\n``{{{[history[]haschanged[]]}}}``\n\n''fullhistory[]'' is only included for //advanced users//. To generate the same list as history[] you would have to write \n``{{{[fullhistory[]!prefix[Draft]reverse[]unique[]]}}}``  ^^[2]^^\n\n!!how to install \n\n''Drag'' the link $:/plugins/wimmoermans/history to your wiki, ''import'' the tiddler and ''save'' your wiki, then ''LOAD'' the newly saved wiki.\nOr ''open'' the history tiddler in this wiki and use the top right icon ''V'', ''export tiddler'', ''JSON file'' to save the tiddler to disk, then in your wiki in the sidebar use ''Tools'',  ''import (paperclip)'' to import the JSON file you just saved, ''save'' your wiki, ''LOAD'' the saved wiki.\n\n# history filter <br>[[$:/plugins/wimmoermans/history/history.js]]\n\n#fullhistory filter <br>[[$:/plugins/wimmoermans/history/fhistory.js]]\n\n#History tab in the Sidebar.<br>[[$:/plugins/wimmoermans/history/HistoryTab]]<br><small>(to disable remove the ~$:/tags/SideBar tag)</small>\n# History2 tab for advanced seard tiddler <br>[[$:/plugins/wimmoermans/history/HistoryTab2]]<br><small>(to disable remove the ~$:/tags/AdvancedSearch tag)</small>\n#$:/plugins/wimmoermans/history/readme this tiddler\n# $:/plugins/wimmoermans/history/icon three cat paw prints (by Motovun ?)\n\n!!Google plus forum to discuss the history filters\nhttps://groups.google.com/forum/#!topic/tiddlywiki/u4lN-olqnPc\n\n\n!! ~TiddlyWiki version compatibility [3]\nhistory and fullhistory were tested on version 5.1.12 pre-release, 5.1.11, 5.1.9, 5.0.8-beta. For 5.0.8-beta the tab-example tiddlers require manually adding the field named 'caption' value 'History' and 'History2' to present the Tab captions.\n\n!!notes/warning\n[1] clicking on ''Draft'' titles in the history is ''dangerous'' especially when the tiddler is already open.\n\n[2] ''unique[]'' is a undocumented filter present in ~TiddlyWiki boot.js.\n\n[3] history scan the $:/HistoryList tiddler for \"title\"://single space//\"//tiddler title//\"  and displays the //tiddler title// value. It correctly handles double quote and backslahs in tiddler titles.\n",
            "title": "$:/plugins/wimmoermans/history/readme",
            "tags": "historyplugin sh",
            "modifier": "wjam",
            "modified": "20160514063831746"
        }
    }
}